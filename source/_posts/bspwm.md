---
title: bspwm,sxhkdé…ç½®ä¸€ä¸ªå¹³é“ºå¼çª—å£ç®¡ç†å™¨
date: 2025-04-05
categories: beyond-ctf
tags: Linux
---
# å‰è¨€
æœ€å¼€å§‹æˆ‘ç”¨ArchLinux(å…¶å®ä¹Ÿå°±ä¸€ä¸ªæœˆå·¦å³å§)ï¼Œæ˜¯ç”¨çš„ğŸš€æ¨èçš„kdeå…¨å®¶æ¡¶
kdeçš„ä¼˜ç‚¹å’Œç¼ºç‚¹éƒ½å¾ˆæ˜ç¡®

ä¼˜ç‚¹:åƒwindows,æ›´é€‚åˆå¹³æ»‘è¿‡åº¦
ç¼ºç‚¹:å¯†ç çš„æˆ‘ä¸ºä»€ä¹ˆè¦ç”¨ä¸€ä¸ªLinuxç‰ˆæœ¬çš„windows,ç”šè‡³ä¸€äº›ç»†èŠ‚è¿˜ä¸å¦‚windows

æœ€å¼€å§‹æˆ‘åªæ˜¯è§‰å¾—kdeè‡ªå¸¦çš„çª—å£ç®¡ç†å™¨æœ‰ç‚¹çƒ¦
ä½œä¸ºä¸€ä¸ªè¢«tmuxæƒ¯åçš„å­©å­ï¼Œæˆ‘æ›´å¸Œæœ›æˆ‘èƒ½è½»æ¾å¿«é€Ÿåˆ‡æ¢çª—å£ï¼Œè€Œä¸æ˜¯`alt+tab`

tmuxå¯ä»¥éšæ—¶çœ‹åˆ°æ¯ä¸€ä¸ªçª—å£åœ¨æ‰§è¡Œä»€ä¹ˆå‘½ä»¤
åœ¨æˆ‘çš„é…ç½®åï¼Œé•¿æŒ‰`alt+->`å³å¯å‘å³çª—å£åˆ‡æ¢
åˆ‡æ¢è¿‡ç¨‹æ˜¯å³æ—¶çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆèŠ±å“¨çš„åŠ¨ç”»
ä¹Ÿå°±æ˜¯æˆ‘åªéœ€è¦çœ‹ä¸€çœ¼çŠ¶æ€æ ï¼Œç„¶åé•¿æŒ‰`alt`å†æŒ‰å‡ ä¸‹å³é”®å¤´æˆ–è€…å·¦ç®­å¤´å°±è¡Œ

å¯¹æ¯”kwinæˆ–è€…windowsçš„çª—å£ç®¡ç†æ–¹å¼
æˆ‘å¿…é¡»é•¿æŒ‰`alt`çš„åŒæ—¶ä¸€ä¸‹ä¸€ä¸‹çš„æŒ‰`tab`
å¹¶ä¸”ä¸åœè§‚å¯Ÿå½“å‰å±äºä»€ä¹ˆçª—å£ï¼Œåˆ°äº†è¦çš„çª—å£å†åœä¸‹æ¥
æœ€è¦å‘½çš„æ˜¯æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ç»å¸¸ä¸ºäº†æŠ å‡ºå±å¹•ç©ºé—´ï¼Œä¸åœçš„è°ƒæ•´å¸ƒå±€ï¼Œæ¯”å¦‚ä¸€ä¼šå…¨å±æµè§ˆå™¨ï¼Œä¸€ä¼šå…¨å±ç»ˆç«¯ï¼Œä¸€ä¼šåŠå±æµè§ˆå™¨å’Œç»ˆç«¯
æ€»ç»“å°±ä¸€ä¸ªå­—`çƒ¦ï¼`

æˆ‘åœ¨ArchLinuxCnç¾¤èŠå‘å¤§ä¼™é—®äº†ä¸€ä¸‹ï¼Œçƒ­æƒ…çš„ç¾¤å‹å‘æˆ‘æ¨èå¹³é“ºå¼çª—å£ç®¡ç†å™¨

# å¹³é“ºå¼ï¼Ÿå †å å¼ï¼Ÿ
å¹³é“ºå°±åƒtmuxä¸€æ ·ï¼Œä¸å…è®¸å¤šä¸ªçª—å£å †å 
è€Œå †å å°±åƒwindowsä¸€æ ·ï¼Œå­—é¢æ„æ€å¾ˆå¥½ç†è§£

å¹³é“ºçš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥è®©ä½ æ‹¥æœ‰å¤šä¸ªçª—å£ï¼Œå¹¶ä¸”å……åˆ†åˆ©ç”¨å…¶ä¸­æ¯ä¸€ä¸ª
æ¯”å¦‚tmuxå¯ä»¥éšæ—¶åˆ›å»ºå’Œåˆ é™¤çª—å£ï¼Œä½ åªéœ€è¦åœ¨æ¯ä¸ªçª—å£åˆ†é…ä¸€ä¸ªå·¥ä½œå³å¯

å †å çš„ä¼˜åŠ¿ï¼Ÿæˆ‘ä¸çŸ¥é“å †å è¿™ç§ä¸œè¥¿ä¸ºä»€ä¹ˆè¿˜å­˜åœ¨ï¼Œå¯èƒ½æ˜¯ç»™å¤§ä¼—ç”¨çš„å§

# å‡ ç§å¹³é“ºå¼çª—å£ç®¡ç†å™¨
æˆ‘å°è¯•äº†ä¸‰ç§ï¼Œæ›´å¤šå¯ä»¥åœ¨[ArchWiki](https://wiki.archlinuxcn.org/wiki/%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8)æ‰¾åˆ°

åœ¨é…ç½®çª—å£ç®¡ç†å™¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘çš„è¡€å‹ä¸€ç›´å¾ˆé«˜
å› ä¸ºåœ¨é…ç½®å¥½ä¹‹å‰ï¼Œæˆ‘å¿…é¡»å¿å—å„ç§å¥‡è‘©çš„é»˜è®¤è®¾ç½®(æ²¡é”™è¯´çš„å°±æ˜¯ä½ i3)
æˆ–è€…æ˜¯ä¸åœçš„é‡å¯æ¥æµ‹è¯•
åˆæˆ–è€…æ˜¯å¤±å»ç”µæºç®¡ç†powerdevilï¼Œå¯¼è‡´æˆ‘æ— æ³•åˆä¸Šæˆ‘çš„ç¬”è®°æœ¬ç›–æ¥ä½¿ç”¨ä¸»æ˜¾ç¤ºå™¨(åæ¥æ‰çŸ¥é“å¯ä»¥ç›´æ¥è¯¥ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œä¸è¿‡ttyçš„æ—¶å€™è¿˜å¼ºåˆ¶ç”¨ç¬”è®°æœ¬å±å¹•ï¼Œæ‰€ä»¥ğŸ™…â€â™€ï¸)
è¿˜ç”±äºå¿…é¡»åœ¨ç™»é™†ç•Œé¢é€‰æ‹©çª—å£ç®¡ç†å™¨(æˆ‘æ²¡æœ‰æ·±å…¥äº†è§£ï¼Œä½†æ˜¯ä¼¼ä¹æ¯”è¾ƒé€šç”¨çš„è§£æ³•éƒ½æ˜¯è¿™æ ·çš„)
æœ€ç¦»è°±çš„æ˜¯æˆ‘é•¿æ—¶é—´å¿…é¡»åœ¨ttyå’Œæ­£å¸¸çª—å£ç›´æ¥åˆ‡æ¢æ¥æµ‹è¯•æ•ˆæœå¦‚ä½•
(æœ‰äº›çª—å£ç®¡ç†å™¨é»˜è®¤å¯åŠ¨åä¼šçº¯é»‘å±ğŸ™…â€â™€ï¸ï¼Œè°çŸ¥é“å‘¢)

æ€»å¾—æ¥è¯´ï¼Œè¦æ˜¯è¯­è¨€è¿‡æ¿€ï¼Œè¯·ä¸è¦å–·æˆ‘

## i3
æˆ‘è¯•äº†i3ï¼Œi3çš„é»˜è®¤è®¾ç½®å¯ä»¥è¯´æ˜¯`braindead`
å½“æˆ‘å¯ç”¨i3ï¼Œæˆ‘åœ¨é»˜è®¤è®¾ç½®ä¸‹æ— æ³•è®©ä»»ä½•ä¸€æ¬¾åº”ç”¨å æ»¡å±å¹•
ç”šè‡³å½“æˆ‘å†æ‰“å¼€ä¸€ä¸ªåº”ç”¨ï¼ŒåŸæ¥çš„åº”ç”¨ä¼šå˜å°ï¼Œå§‹ç»ˆåœ¨æˆ‘çš„æ¡Œé¢ä¸­é—´ç©ºç€ä¸€å¤§ç‰‡
i3å¼€å‘è€…å¸Œæœ›æˆ‘æ¬£èµæ¡Œé¢å£çº¸ï¼Ÿnothanks

é»˜è®¤è®¾ç½®å½“ç„¶ä¸æ˜¯ä¸€åˆ‡
i3çš„ç”¨æˆ·å¾ˆå¤šï¼Œæ–‡æ¡£ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æˆ‘å§‹ç»ˆæ— æ³•æ‰¾åˆ°ä»»ä½•å…³äºå æ»¡å±å¹•çš„è®¾ç½®
plusï¼Œi3åº•éƒ¨çš„çŠ¶æ€æ ä¹Ÿæ˜¯ğŸ’©ï¼Œä¸ºä»€ä¹ˆä¸è®©å…¶ä»–ç»„ä»¶æ¥å®ŒæˆçŠ¶æ€æ ï¼Œä¸ä¹æ„å†™å°±åˆ«å†™ï¼Œæ›´åˆ«æi3çš„çŠ¶æ€æ åŠ ä¸Škdeçš„çŠ¶æ€æ ï¼Œæˆ‘çš„æ¡Œé¢åº•éƒ¨å°±ä¼šéå¸¸å¥‡æ€ª

å¯èƒ½æœ‰äº›è¿‡æ¿€äº†ï¼Œä½†æ˜¯æˆ‘æœ€åå› ä¸ºè¿™äº›åŸå› æ”¾å¼ƒäº†i3

## herbstluftwm
é¦–å…ˆè¿™ä¸ªåå­—ä¹Ÿæ˜¯`braindead`ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è¯•äº†ä¸€ä¸‹
ä»–å’Œ`bspwm`æœ‰äº›åƒï¼Œå¯åŠ¨åæ˜¯çº¯ç»¿å±ï¼Œç„¶åæˆ‘å°è¯•äº†æœ€ç®€å•çš„é…ç½®
ç”±äºä¸çŸ¥é“æ€ä¹ˆè®©ä»–æ‰§è¡Œå‘½ä»¤ï¼Œæ”¾å¼ƒäº†(è¿™ä¸ªå¤§æ¦‚æ˜¯æˆ‘çš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘ç»å¸¸è¯»ä¸æ‡‚æ–‡æ¡£)

## bspwm
æœ‰è¯·å”¯ä¸€çœŸç¥ï¼(æŒ‡æˆ‘ç”¨è¿‡çš„)

å…³äºé…ç½®å¯ä»¥å‚è€ƒ[config](https://dev.to/l04db4l4nc3r/bspwm-a-bare-bones-window-manager-44di)

### å®‰è£…
å¯¹äºArchç”¨æˆ·ï¼Œç¥åœ£çš„pacman(æˆ–è€…yay)å°†å¼•å¯¼æˆ‘ä»¬
```zsh
sudo pacman -S bspwm sxhkd
```
ä½¿ç”¨pacmançš„å¥½å¤„åœ¨äºè¿ç»­å®‰è£…å¤šä¸ªåŒ…æ¯”è¾ƒæ–¹ä¾¿

ç„¶åæ ¹æ®ç¯å¢ƒä¸åŒï¼Œæˆ‘å·²ç»çœ‹åˆ°äº†Nç§å¯åŠ¨æ–°çª—å£ç®¡ç†å™¨æ–¹å¼äº†

> [ArchWiki](https://wiki.archlinuxcn.org/wiki/KDE#%E6%9B%BF%E6%8D%A2KWin%E6%9C%8D%E5%8A%A1)ä¸­æè¿°çš„é€šè¿‡systemctlå¯åŠ¨ï¼Œè¿™ç§æ–¹å¼åº”è¯¥æ˜¯é€‚ç”¨äºä¾ç„¶ä½¿ç”¨kdeçš„æ¡Œé¢ç¯å¢ƒçš„çª—å£ç®¡ç†å™¨(å¯¹äºæˆ‘æ¥è¯´ï¼ŒiæŸ3)
> è¿™ç§å¯åŠ¨æ–¹å¼é™¤äº†éº»çƒ¦æ²¡æœ‰å¥½å¤„ï¼Œä½ å¦‚æœéœ€è¦kwinçš„æ—¶å€™è¿˜å¾—å†å¯åŠ¨

> å¯¹äºæˆ‘çš„ç™»é™†ç®¡ç†å™¨sddmæ¥è¯´ï¼Œbspwmä¼¼ä¹ä¸éœ€è¦è¿™æ ·
> åœ¨å®‰è£…ä¹‹åï¼Œä½ çš„`/usr/share/xsessions/`ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ª
> `bspwm.desktop`ï¼Œåœ¨æ¯æ¬¡å¯åŠ¨ç³»ç»Ÿï¼Œè¿›å…¥ç™»é™†ç•Œé¢æ—¶å¯ä»¥é€‰æ‹©`bspwm`

ä½†æ˜¯å…ˆä¸è¦é‡å¯ï¼Œå› ä¸ºå¦‚æœä½ ä¸ç†Ÿæ‚‰`tty`çš„è¯ï¼Œå¿…é¡»åœ¨kdeä¸‹å®Œæˆæœ€åä¸€ä»¶äº‹

```zsh
cp /usr/share/doc/sxhkd/examples/background_shell/sxhkdrc ~/.config/sxhkd/sxhkdrc

cp /usr/share/doc/bspwm/examples/bspwmrc ~/.config/bspwm/bspwmrc
```
`bspwm`å’Œ`sxhkd`éƒ½è¯»å–`.config`ä¸‹çš„é…ç½®ï¼Œæ‰€ä»¥åœ¨`.config`ä¸‹æ›´æ”¹
ç„¶åè‡³å°‘åœ¨`sxhkdrc`ä¸­åŠ ä¸Š
```rc
super + Return
    kitty # æˆ–è€…å…¶ä»–terminalï¼Œkonsoleå¥½åƒä¸è¡ŒğŸ™…â€â™€ï¸
```
æœ€ååœ¨`bspwmrc`åŠ ä¸Š`sxhkd &`

### bspwm,âš ï¸å¯åŠ¨ï¼

å¯¹äºsddmæ¥è¯´ï¼Œåªéœ€è¦åœ¨è¾“å…¥å¯†ç çš„ç•Œé¢æ›´æ¢å°±è¡Œäº†ï¼Œæ¢æˆbspwmåå¯åŠ¨ï¼

åœ¨é»‘å±ä¸­æŒ‰`super + Return`å¯åŠ¨`terminal`ï¼Œå¯¹äºwindowsé”®ç›˜å¸ƒå±€æ¥è¯´ï¼ŒæŒ‰`win + Enter`

ä½†æ˜¯åœ¨`sxhkdrc`ä¸­è¿˜æ˜¯ä»¥`mac`çš„å¸ƒå±€ä¸ºå‡†ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠ`Enter`å«åš`Return`ï¼Œ`win`å«åš`super`

æ¥ä¸‹æ¥åœ¨ç»ˆç«¯ä¸­å¯ä»¥å°è¯•ä¸€ä¸‹`bspc`çš„åŠŸèƒ½ï¼Œå› ä¸ºæ¥ä¸‹æ¥çš„é…ç½®ä¼šéœ€è¦ç”¨åˆ°

ä¸‹é¢æ˜¯æˆ‘çš„sxhkdrcé…ç½®ï¼ŒçœŸæ­£çš„çƒ­é”®åœ¨è¿™é‡Œé…ç½®
```rc
# å¼€å¯ç»ˆç«¯
super + Return
    kitty
# å¯åŠ¨èœå•
super + q
    exec rofi -show run
# æˆªå›¾
super + Print
    exec spectacle
# å…³é—­å½“å‰èŠ‚ç‚¹
super + c
    bspc node -c
# æ€æ­»å½“å‰èŠ‚ç‚¹
super + k
    bspc node -k
# å½“å‰çª—å£åˆ‡æ¢æµ®åŠ¨
super + m
    bspc node -t '~floating'
# {å¯¹è°ƒ,èšç„¦}{ä¸Šä¸‹å·¦å³}èŠ‚ç‚¹
{_,shift + } super + {Up,Down,Right,Left}
    bspc node -{f,s} {north,south,east,west}
{_,shift + } super + {k,j,l,h}
    bspc node -{f,s} {north,south,east,west}

# å»{ä¸‹/ä¸Š}ä¸€ä¸ªæ¡Œé¢
alt + {Right, Left}
    bspc desktop {next,prev} -f
alt + {l,h}
    bspc desktop {next,prev} -f
# æ‹–æ‹½å½“å‰èŠ‚ç‚¹è‡³{ä¸‹,ä¸Š}ä¸€ä¸ªæ¡Œé¢
shift + alt {Right,Left};
    desktop={next,prev};bspc node -d "$desktop" && bspc desktop "$desktop" -f
shift + alt {l,h};
    desktop={next,prev};bspc node -d "$desktop" && bspc desktop "$desktop" -f

# é‡å¯sxhkdçƒ­é”®
shift + alt + Escape
    pkill -USR1 -x sxhkd
# {é€€å‡º,é€€å‡º}å½“å‰æ¡Œé¢ç¯å¢ƒ
shift + alt + {q,r}
    bspc {quit, wm -r}
```
æ³¨æ„æ¯æ¬¡æ›´æ”¹çƒ­é”®åéƒ½è¦ç”¨é‡å¯`sxhkd`ï¼Œç„¶åå°±å¯ä»¥å°è¯•ä¸€ä¸‹å„ç§åŸºç¡€æ“ä½œäº†
ä¹Ÿå¯ä»¥è¯•è¯•åˆ«çš„ï¼Œsxhkdçš„è¯­æ³•è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„

è‡³äº`bspwm`çš„é…ç½®ï¼Œæˆ‘è¿˜å¯åŠ¨äº†ä¸€äº›ç¾åŒ–æ’ä»¶ï¼Œ`picom`å’Œ`nitrogen`å’Œ`polybar`
`picom`æ˜¯çª—å£åˆæˆå™¨ï¼Œæä¾›ä¸€äº›çª—å£é€æ˜åº¦ï¼ŒèƒŒæ™¯æ¨¡ç³Šçš„æ•ˆæœ
`nitrogen`æˆ‘åªç”¨æ¥è®¾ä¸ªèƒŒæ™¯
`polybar`æ˜¯çŠ¶æ€æ ï¼Œä¼šæ˜¾ç¤ºä½ ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œä½†æ˜¯ä¸èƒ½å‘windowsä¸€æ ·ç‚¹å‡»æ¥äº¤äº’

`fcitx5`æ˜¯æˆ‘åœ¨kdeæ—¶å€™ç”¨çš„ä¸­æ–‡è¾“å…¥æ³•ï¼Œä¹Ÿé¡ºä¾¿å¯åŠ¨äº†ï¼Œè¦ä¸ç„¶ä»–ä¸ä¼šè‡ªåŠ¨å¯åŠ¨
```rc

#! /bin/sh

sxhkd &
picom &
fcitx5 &
polybar example -q &

nitrogen --set-scaled /usr/share/wallpapers/Autumn/contents/images/1920x1080.jpg

bspc monitor -d I II III IV V VI 

bspc config border_width         5
bspc config focused_border_color "#0eb0d3"
bspc config window_gap           5

# ä»è¿™ä¸€è¡Œå¾€ä¸‹ï¼Œæˆ‘å°±ä¸çŸ¥é“è¿™äº›é…ç½®æ˜¯å¹²ä»€ä¹ˆçš„äº†
# ä½†æ˜¯ç”±äºæ˜¯é»˜è®¤é…ç½®ï¼Œæˆ‘å§‘ä¸”æ”¾ä»–ä»¬ä¸€å‘½
bspc config split_ratio          0.52
# bspc config borderless_monocle   true
# bspc config gapless_monocle      true

bspc rule -a Kupfer.py focus=on
bspc rule -a Screenkey manage=off
```

# æ•ˆæœå›¾
![result1](./bspwm/result1.png)

![result2](./bspwm/result2.png)

# æœ€å
å…¶å®åˆ°è¿™é‡Œä¹‹åè¿˜æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰è¯´ï¼Œ
æ¯”å¦‚æˆªå›¾è½¯ä»¶é€‰æ‹©ï¼Œç”µæºç®¡ç†é€‰æ‹©ï¼ŒéŸ³é‡è½¯ä»¶åŠå¿«æ·é”®é…ç½®ï¼Œå±å¹•äº®åº¦ç­‰ç­‰
ä½†æ˜¯è¿™äº›ä¸œè¥¿å¤ªè¿‡äºä¸ªæ€§åŒ–äº†

æ¯”å¦‚å¯¹äºæˆ‘æ¥è¯´ï¼Œç”µæºæˆ‘åªéœ€è¦æ”¹ä¸€ä¸‹åˆä¸Šç¬”è®°æœ¬ç»§ç»­å‘ä¸»å±è¾“å‡ºå³å¯ï¼Œæ²¡ä»€ä¹ˆé¢‘ç¹å˜æ›´çš„éœ€æ±‚ï¼Œå®Œå…¨å¯ä»¥é€šè¿‡æ›´æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶åšåˆ°

éŸ³é‡é…ç½®çš„è¯æˆ‘å¯ä»¥ç”¨`mate-volume-control`å‘¼å‡ºèœå•æ›´æ”¹å°±å·®ä¸å¤šäº†ï¼Œæ²¡å¿…è¦å†è®¾ç½®å¿«æ·é”®(å…¶å®å¯èƒ½è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œä½†æ˜¯åˆšé…å®Œè¿™ä¹ˆå¤šæœ‰ç‚¹ç´¯)
